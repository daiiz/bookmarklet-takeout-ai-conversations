javascript:(function(){
const getNextjsPageProps$$module$src$chatgpt=()=>{const a=document.querySelector("script#__NEXT_DATA__");return JSON.parse(a?.textContent||"{}").props?.pageProps||{}},getChatTitle$$module$src$chatgpt=()=>document.querySelector("title").textContent,getChatContents$$module$src$chatgpt=({userName:a,aiName:d},{user:c})=>{const f=[],e=document.querySelectorAll("div.text-base");for(let k=0;k<e.length;k++){var b=e[k],g=b.parentElement.querySelector("div.text-base > div:nth-child(2)").textContent,h=b.querySelector(".rounded-sm svg");
const l=b.querySelector("img[alt]:not([alt=''])");b=a;h&&(b=d);l&&!a&&(b=c?.name||"me");h=`[${b.replace(/\s/g,"_")}.icon]`;b===d?(g=g.split("\n"),f.push(h,...g.map(m=>` ${m}`),"")):f.push(`${h} ${g}`)}return f};
function extractChatGPTTexts$$module$src$chatgpt({userName:a,chatgpt:d}){var c=getNextjsPageProps$$module$src$chatgpt();const f={userName:a,aiName:d.aiName};a=getChatTitle$$module$src$chatgpt();c=getChatContents$$module$src$chatgpt(f,c);return{title:a,contents:c,hashtagLine:d.hashtagLine}}var module$src$chatgpt={};module$src$chatgpt.extractChatGPTTexts=extractChatGPTTexts$$module$src$chatgpt;const getUserName$$module$src$bard=()=>document.querySelector(".gb_Ab")?.textContent||"",getChatTitle$$module$src$bard=()=>(document.querySelector(".user-query-container .query-text")?.textContent||"No title").substring(0,50),getChatContents$$module$src$bard=({userName:a,aiName:d})=>{const c=[],f=document.querySelectorAll(".conversation-container");for(let h=0;h<f.length;h++){var e=f[h],b=e.querySelector(".user-query-container");e=e.querySelector(".response-container");b=b.querySelector(".query-text")?.textContent||
"";var g=`[${a.replace(/\s/g,"_")}.icon]`;c.push(`${g} ${b}`);b=e.querySelector(".model-response-text .markdown").children;e=[];for(g=0;g<b.length;g++)e.push(b[g]?.textContent||"");b=`[${d.replace(/\s/g,"_")}.icon]`;c.push(b,...e.map(k=>` ${k}`),"")}return c};
function extractBardTexts$$module$src$bard({userName:a,bard:d}){var c={userName:getUserName$$module$src$bard()||a||"me",aiName:d.aiName||"ai"};a=getChatTitle$$module$src$bard();c=getChatContents$$module$src$bard(c);return{title:a,contents:c,hashtagLine:d.hashtagLine}}var module$src$bard={};module$src$bard.extractBardTexts=extractBardTexts$$module$src$bard;const config$$module$index=Object.freeze({userName:"",chatgpt:{aiName:"chatgpt",hashtagLine:"#ChatGPT\u65e5\u8a18"},bard:{aiName:"bard",hashtagLine:"#Bard\u65e5\u8a18"}}),createScrapboxLines$$module$index=a=>{const d=[];let c;"https://chat.openai.com"===a?c=extractChatGPTTexts$$module$src$chatgpt(config$$module$index):"https://bard.google.com"===a&&(c=extractBardTexts$$module$src$bard(config$$module$index));if(!c)return d;const {title:f,contents:e,hashtagLine:b}=c;d.push(f);d.push((new Date).toLocaleDateString(),
"");d.push(...e);d.push("",b);return d},copyToClipboard$$module$index=async a=>{await navigator.clipboard.writeText(a);alert("Copied to clipboard!")},main$$module$index=()=>{copyToClipboard$$module$index(createScrapboxLines$$module$index(window.location.origin).join("\n"))};main$$module$index();var module$index={};
})()
