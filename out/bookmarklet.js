javascript:(function(){
const getNextjsPageProps$$module$src$chatgpt=()=>{const b=document.querySelector("script#__NEXT_DATA__");return JSON.parse(b?.textContent||"{}").props?.pageProps||{}},getChatTitle$$module$src$chatgpt=()=>document.querySelector("title").textContent,getChatContents$$module$src$chatgpt=({userName:b,aiName:e},{user:d})=>{const k=[],f=document.querySelectorAll("div.text-base");for(let g=0;g<f.length;g++){var c=f[g],l=c.parentElement.querySelector("div.text-base > div:nth-child(2)").textContent,a=c.querySelector(".rounded-sm svg");
const m=c.querySelector("img[alt]:not([alt=''])");c=b;a&&(c=e);m&&!b&&(c=d?.name||"me");a=`[${c.replace(/\s/g,"_")}.icon]`;c===e?(l=l.split("\n"),k.push(a,...l.map(h=>` ${h}`),"")):k.push(`${a} ${l}`)}return k};
function extractChatGPTTexts$$module$src$chatgpt({userName:b,chatgpt:e}){var d=getNextjsPageProps$$module$src$chatgpt();const k={userName:b,aiName:e.aiName};b=getChatTitle$$module$src$chatgpt();d=getChatContents$$module$src$chatgpt(k,d);return{title:b,contents:d,hashtagLine:e.hashtagLine}}var module$src$chatgpt={};module$src$chatgpt.extractChatGPTTexts=extractChatGPTTexts$$module$src$chatgpt;const getUserName$$module$src$bard=()=>document.querySelector(".gb_Ab")?.textContent||"",getChatTitle$$module$src$bard=()=>(document.querySelector(".user-query-container .query-text")?.textContent||"No title").substring(0,50),getChatContents$$module$src$bard=({userName:b,aiName:e})=>{const d=[],k=document.querySelectorAll(".conversation-container");for(let m=0;m<k.length;m++){var f=k[m],c=f.querySelector(".user-query-container");f=f.querySelector(".response-container");c=c.querySelector(".query-text")?.textContent||
"";var l=`[${b.replace(/\s/g,"_")}.icon]`;d.push(`${l} ${c}`);c=f.querySelector(".model-response-text .markdown").children;f=[];for(l=0;l<c.length;l++){var a=c[l];if("UL"===a.tagName||"OL"===a.tagName){a=a.querySelectorAll("li");for(var g=0;g<a.length;g++)f.push(` ${a[g]?.textContent||""}`)}else if("CODE-BLOCK"===a.tagName)a=a.querySelector("div.code-block"),g=a.querySelector("div.header")?.textContent||"",f.push(`code:${g.toLowerCase()}`),a=(a.querySelector("pre")?.textContent||"").split("\n").filter(h=>
!!h),f.push(...a.map(h=>` ${h}`));else if(a.classList.contains("horizontal-scroll-wrapper")&&a.querySelector("table")){a=a.querySelector("table tbody").querySelectorAll("tr");g=[];for(let h=0;h<a.length;h++){const p=a[h].querySelectorAll("td,th"),q=[];for(let n=0;n<p.length;n++)q.push(p[n]?.textContent||"");0===h&&g.push("table:table");g.push(` ${q.join("\t")}`)}f.push(...g)}else f.push(a?.textContent||"")}c=`[${e.replace(/\s/g,"_")}.icon]`;d.push(c,...f.map(h=>` ${h}`),"")}return d};
function extractBardTexts$$module$src$bard({userName:b,bard:e}){var d={userName:getUserName$$module$src$bard()||b||"me",aiName:e.aiName||"ai"};b=getChatTitle$$module$src$bard();d=getChatContents$$module$src$bard(d);return{title:b,contents:d,hashtagLine:e.hashtagLine}}var module$src$bard={};module$src$bard.extractBardTexts=extractBardTexts$$module$src$bard;const config$$module$index=Object.freeze({userName:"",chatgpt:{aiName:"chatgpt",hashtagLine:"#ChatGPT\u65e5\u8a18"},bard:{aiName:"bard",hashtagLine:"#Bard\u65e5\u8a18"}}),createScrapboxLines$$module$index=b=>{const e=[];let d;"https://chat.openai.com"===b?d=extractChatGPTTexts$$module$src$chatgpt(config$$module$index):"https://bard.google.com"===b&&(d=extractBardTexts$$module$src$bard(config$$module$index));if(!d)return e;const {title:k,contents:f,hashtagLine:c}=d;e.push(k);e.push((new Date).toLocaleDateString(),
"");e.push(...f);e.push("",c);return e},copyToClipboard$$module$index=async b=>{await navigator.clipboard.writeText(b);alert("Copied to clipboard!")},main$$module$index=()=>{copyToClipboard$$module$index(createScrapboxLines$$module$index(window.location.origin).join("\n"))};main$$module$index();var module$index={};
})()
