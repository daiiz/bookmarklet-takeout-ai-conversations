javascript:(function(){
const getNextjsPageProps$$module$src$chatgpt=()=>{const a=document.querySelector("script#__NEXT_DATA__");return JSON.parse(a?.textContent||"{}").props?.pageProps||{}},getChatTitle$$module$src$chatgpt=()=>document.querySelector("title").textContent,isUsedPluginsModel$$module$src$chatgpt=()=>{const a=document.querySelector("main div.w-full");return a?a.textContent.replace(/\s/gi,"").toLowerCase().includes("model:plugins"):!1},getPluginNames$$module$src$chatgpt=(a,f)=>{a=a.parentElement.querySelector(f).querySelector("div.flex-col.items-start");
return!a||a.classList.contains("whitespace-pre-wrap")?[]:a.textContent.replace(/^used\s+/gi,"").split(/[,\s]/).map(c=>c.trim()).filter(c=>!!c)},getChatContents$$module$src$chatgpt=({userName:a,aiName:f},{user:c})=>{const g=isUsedPluginsModel$$module$src$chatgpt(),b=[],h=document.querySelectorAll("div.text-base");for(let m=0;m<h.length;m++){var e=h[m],d=(e.parentElement.querySelector("div.text-base div.markdown")||e.parentElement.querySelector("div.text-base > div:nth-child(2)").querySelector("div.whitespace-pre-wrap")).textContent,
k=e.querySelector(".rounded-sm svg");const l=e.querySelector("img[alt]:not([alt=''])");let n=a;k&&(n=f);l&&!a&&(n=c?.name||"me");k=[];g&&k.push(...getPluginNames$$module$src$chatgpt(e,"div.text-base > div:nth-child(2)"));e=`[${n.replace(/\s/g,"_")}.icon]`;0<k.length&&(e+=` Used ${k.join(", ")}`);n===f?(d=d.split("\n"),b.push(e,...d.map(p=>` ${p}`),"")):b.push(`${e} ${d}`)}return b};
function extractChatGPTTexts$$module$src$chatgpt({userName:a,chatgpt:f}){var c=getNextjsPageProps$$module$src$chatgpt();const g={userName:a,aiName:f.aiName};a=getChatTitle$$module$src$chatgpt();c=getChatContents$$module$src$chatgpt(g,c);return{title:a,contents:c,hashtagLine:f.hashtagLine}}var module$src$chatgpt={};module$src$chatgpt.extractChatGPTTexts=extractChatGPTTexts$$module$src$chatgpt;const getUserName$$module$src$bard=()=>document.querySelector(".gb_Ab")?.textContent||"",getChatTitle$$module$src$bard=()=>(document.querySelector(".user-query-container .query-text")?.textContent||"No title").substring(0,50),getChatContents$$module$src$bard=({userName:a,aiName:f})=>{const c=[],g=document.querySelectorAll(".conversation-container");for(let m=0;m<g.length;m++){var b=g[m],h=b.querySelector(".user-query-container");b=b.querySelector(".response-container");h=h.querySelector(".query-text")?.textContent||
"";var e=`[${a.replace(/\s/g,"_")}.icon]`;c.push(`${e} ${h}`);h=b.querySelector(".model-response-text .markdown").children;b=[];for(e=0;e<h.length;e++){var d=h[e];if("UL"===d.tagName||"OL"===d.tagName){d=d.querySelectorAll("li");for(var k=0;k<d.length;k++)b.push(` ${d[k]?.textContent||""}`)}else if("CODE-BLOCK"===d.tagName)d=d.querySelector("div.code-block"),k=d.querySelector("div.header")?.textContent||"",b.push(`code:${k.toLowerCase()}`),d=(d.querySelector("pre")?.textContent||"").split("\n").filter(l=>
!!l),b.push(...d.map(l=>` ${l}`));else if(d.classList.contains("horizontal-scroll-wrapper")&&d.querySelector("table")){d=d.querySelector("table tbody").querySelectorAll("tr");k=[];for(let l=0;l<d.length;l++){const n=d[l].querySelectorAll("td,th"),p=[];for(let q=0;q<n.length;q++)p.push(n[q]?.textContent||"");0===l&&k.push("table:table");k.push(` ${p.join("\t")}`)}b.push(...k)}else b.push(d?.textContent||"")}h=`[${f.replace(/\s/g,"_")}.icon]`;c.push(h,...b.map(l=>` ${l}`),"")}return c};
function extractBardTexts$$module$src$bard({userName:a,bard:f}){var c={userName:getUserName$$module$src$bard()||a||"me",aiName:f.aiName||"ai"};a=getChatTitle$$module$src$bard();c=getChatContents$$module$src$bard(c);return{title:a,contents:c,hashtagLine:f.hashtagLine}}var module$src$bard={};module$src$bard.extractBardTexts=extractBardTexts$$module$src$bard;const getUserName$$module$src$sge=a=>a||"me",getChatTitle$$module$src$sge=()=>(document.querySelector("form").querySelector("textarea")?.value||"No title").substring(0,50),getChatContents$$module$src$sge=({userName:a,aiName:f})=>{const c=getChatTitle$$module$src$sge();var g=null,b=document.querySelectorAll("h1");for(const e of b)if("AI \u306b\u3088\u308b\u6982\u8981"===e.textContent){g=e.parentNode;break}if(g){b=g.querySelector("div").querySelector("div[jscontroller]").querySelector("div");b=b.querySelector("div[jsname]").querySelector("div[data-ve-view]");
b=b.querySelector("div[jsname]").querySelector("div[jsaction]");b=b.lastElementChild;b=b.firstElementChild;b=b.querySelector("div[jsname]");g=[];for(var h of b.children)b=h.innerText,b.includes("\n")?(b=b.split("\n"),g.push(...b.map(e=>`\t${e}`))):g.push(b);h=[];h.push(`[${a}.icon] ${c}`);h.push(`[${f}.icon]`);h.push(...g.map(e=>`\t${e}`));return h}console.error("No container")};
function extractSGETexts$$module$src$sge({userName:a,sge:f}){var c={userName:getUserName$$module$src$sge(a)||a||"me",aiName:f.aiName||"ai"};a=getChatTitle$$module$src$sge();c=getChatContents$$module$src$sge(c);console.log({title:a,contents:c});return{title:`${f.titlePrefix}${a}`,contents:c,hashtagLine:f.hashtagLine}}var module$src$sge={};module$src$sge.extractSGETexts=extractSGETexts$$module$src$sge;const config$$module$index=Object.freeze({userName:"",chatgpt:{aiName:"chatgpt",hashtagLine:"#ChatGPT\u65e5\u8a18"},bard:{aiName:"bard",hashtagLine:"#Bard\u65e5\u8a18"},sge:{aiName:"sge",hashtagLine:"#SGE\u65e5\u8a18",titlePrefix:"Google\u691c\u7d22: "}}),createScrapboxLines$$module$index=({origin:a,href:f})=>{const c=[];let g;if("https://chat.openai.com"===a)g=extractChatGPTTexts$$module$src$chatgpt(config$$module$index);else if("https://bard.google.com"===a)g=extractBardTexts$$module$src$bard(config$$module$index);
else if(f.startsWith("https://www.google.com/search?")||f.startsWith("https://www.google.co.jp/search?"))g=extractSGETexts$$module$src$sge(config$$module$index);if(!g)return c;const {title:b,contents:h,hashtagLine:e}=g;c.push(b);c.push((new Date).toLocaleDateString(),"");c.push(...h);c.push("",e);return c},copyToClipboard$$module$index=async a=>{await navigator.clipboard.writeText(a);alert("Copied to clipboard!")},main$$module$index=()=>{copyToClipboard$$module$index(createScrapboxLines$$module$index({origin:window.location.origin,
href:window.location.href}).join("\n"))};main$$module$index();var module$index={};
})()
