javascript:(function(){
const yourName="",chatgptName="chatgpt",hashtagLine="#ChatGPT\u65e5\u8a18",getNextjsProps=()=>{const a=document.querySelector("script#__NEXT_DATA__");return JSON.parse(a?.textContent||"{}").props?.pageProps||{}},getChatTitle=()=>document.querySelector("title").textContent,getChatContents=({user:a})=>{const b=[],d=document.querySelectorAll("div.text-base");for(let g=0;g<d.length;g++){var c=d[g],e=c.parentElement.querySelector("div.text-base > div:nth-child(2)").textContent,f=c.querySelector(".rounded-sm svg");
const h=c.querySelector("img[alt]:not([alt=''])");c=yourName;f&&(c=chatgptName);h&&!yourName&&(c=a?.name||"me");f=`[${c.replace(/\s/g,"_")}.icon]`;c===chatgptName?(e=e.split("\n"),b.push(f,...e.flatMap(k=>` ${k}`),"")):b.push(`${f} ${e}`)}return b},createScrapboxLines=()=>{var a=getNextjsProps();const b=[],d=getChatTitle();a=getChatContents(a);b.push(d);b.push((new Date).toLocaleDateString(),"");b.push(...a);b.push("",hashtagLine);return b},copyToClipboard=async a=>{await navigator.clipboard.writeText(a);
alert("Copied to clipboard!")};copyToClipboard(createScrapboxLines().join("\n"));
})()
